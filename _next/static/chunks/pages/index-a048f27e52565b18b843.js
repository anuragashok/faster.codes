(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4668:function(e,t,r){"use strict";r(7294);var n=r(1664),s=r(5893);t.Z=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("footer",{className:"p-10 footer bg-neutral text-neutral-content footer-center mt-4",children:[(0,s.jsxs)("div",{className:"grid grid-flow-col gap-4",children:[(0,s.jsx)("a",{className:"",children:"Examples: "}),(0,s.jsx)(n.default,{href:"/?runId=31nq",children:(0,s.jsx)("a",{className:"link",children:"for-loop vs streams"})}),(0,s.jsx)(n.default,{href:"/?runId=31nr",children:(0,s.jsx)("a",{className:"link",children:"parallel vs serial streams"})})]}),(0,s.jsx)("div",{className:"grid grid-flow-col gap-4 grid-1",children:(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-lg mb-4",children:["This app was created as an entry to the"," ",(0,s.jsx)("a",{className:"link",href:"https://blog.cloudflare.com/developer-summer-challenge/",children:"Cloudflare Developer Summer Challenge."})]})})})]})})}},5774:function(e,t,r){"use strict";var n=r(5893);t.Z=function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"navbar mb-2 shadow-lg bg-neutral text-neutral-content rounded-box",children:(0,n.jsxs)("div",{className:"container mx-auto h-full",children:[(0,n.jsxs)("div",{className:"px-2 mx-2 navbar-start",children:[(0,n.jsx)("svg",{className:"fill-current inline-block",viewBox:"0 0 24 24",height:"48",width:"48",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:(0,n.jsx)("path",{d:"M16 10.174v-2.174h3v2.174c.689.163 1.335.436 1.92.799l.816-.973 1.532 1.286-.83.989c.974 1.137 1.562 2.613 1.562 4.225 0 3.587-2.913 6.5-6.5 6.5s-6.5-2.913-6.5-6.5c0-3.071 2.135-5.648 5-6.326zm7-9.174v7h-2v-2h-19v15h8.289c.472.754 1.059 1.429 1.736 2h-12.025v-22h23zm-5.5 11c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5-4.5-2.016-4.5-4.5 2.016-4.5 4.5-4.5zm2.368 1.49l-2.076 1.562c-.503-.103-1.045.051-1.413.461-.548.615-.496 1.558.119 2.107.614.55 1.558.497 2.107-.117.367-.412.459-.967.3-1.456l1.303-2.255-.34-.302z"})}),(0,n.jsx)("span",{className:"ml-6 align-middle inline-block text-2xl font-bold",children:"{\xa0faster.codes\xa0}"})]}),(0,n.jsx)("div",{className:"hidden px-2 mx-2 navbar-center lg:flex",children:(0,n.jsx)("h2",{className:" text-3xl  text-center"})}),(0,n.jsx)("div",{className:"navbar-end",children:(0,n.jsx)("div",{className:"text-right items-stretch",children:(0,n.jsxs)("a",{className:"btn btn-ghost btn-sm rounded-btn",href:"https://github.com/anuragashok/faster.codes",target:"_blank",rel:"noreferrer",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-block w-5 mr-2 stroke-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Github"]})})})]})})})}},7109:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n=r(5785),s=r(4942),a=r(5861),l=r(7757),c=r.n(l),i=r(4668),o=r(5774),d=r(7294),u=r(5007),x=r(5893),m=function(e){var t=e.lang,r=e.onChange,n=(0,d.useState)(!1),s=n[0],a=n[1];return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"dropdown lang-dropdown",children:[(0,x.jsxs)("div",{tabIndex:0,className:"btn btn-sm btn-primary ",onClick:function(){return a(!s)},children:[(0,x.jsx)("div",{className:"w-32 font-large capitalize",children:t||"select platform"}),s&&(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),!s&&(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),s&&(0,x.jsx)("ul",{tabIndex:0,className:"shadow menu compact dropdown-content bg-base-100 rounded-box w-52",children:["java","go"].map((function(e,t){return(0,x.jsx)("li",{onClick:function(){return a(!s)},children:(0,x.jsx)("a",{onClick:function(){return r(e)},className:"p-0.5 capitalize",children:e})},t)}))})]})})},h=r(8764).Buffer;function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.index,r=e.codeRunData,n=e.onChange,s=(0,d.useState)(new Map),l=s[0],i=s[1],o=function(){var e=(0,a.Z)(c().mark((function e(s){var a,i,o,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",console.log(l),!l.has(s)){e.next=7;break}(i=l.get(s))&&(a=i),e.next=13;break;case 7:return e.next=9,fetch("/lang_config/code_templates/".concat(s,".txt"));case 9:return o=e.sent,e.next=12,o.text();case 12:a=e.sent;case 13:d=a?h.from(a).toString("base64"):"",n(t,v(v({},r),{},{code:d,lang:s}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"bg-base-300 w-full rounded-t-2xl ",children:[(0,x.jsxs)("div",{className:"grid grid-cols-3 justify-items-stretch",children:[(0,x.jsx)(m,{lang:r.lang,onChange:o}),(0,x.jsxs)("div",{className:"self-center text-center text-black text-bold",children:["Block ",String.fromCharCode(65+t)]})]}),(0,x.jsx)(u.ZP,{height:"50vh",language:r.lang,value:h.from(r.code,"base64").toString(),onChange:function(e){var s=e?h.from(e).toString("base64"):"";e&&i(l.set(r.lang,e)),console.log(l),n(t,v(v({},r),{},{code:s}))},theme:"vs-dark",options:{fontSize:16,fontFamily:"Fira Code",minimap:{enabled:!1},scrollBeyondLastLine:!1}})]})})};function j(e){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(JSON.stringify(t)),e.next=3,fetch("".concat("https://api.faster.codes/"),{method:"POST",body:JSON.stringify(r)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent.runId);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,a=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e){var t,r=[],n=["left","right"],s=0,a=b(e.codeRuns);try{for(a.s();!(t=a.n()).done;){var l=t.value;l.lang||r.push("Please select the language on the ".concat(n[s]," side")),l.code||r.push("Please enter code to test on the ".concat(n[s]," side")),s++}}catch(c){a.e(c)}finally{a.f()}return r}var y=function(e){var t=e.open,r=e.onClose,n=e.messages;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"modal ".concat(t?"modal-open":""),children:(0,x.jsxs)("div",{className:"modal-box ",children:[(0,x.jsx)("div",{className:"alert alert-error",children:(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),(0,x.jsx)("label",{children:"We could not proceed because of the below errors"})]})}),(0,x.jsx)("ul",{className:"text-error mt-5 list-inside list-disc",children:n.map((function(e,t){return(0,x.jsx)("li",{children:e},t)}))}),(0,x.jsx)("div",{className:"modal-action",children:(0,x.jsx)("label",{htmlFor:"my-modal-2",className:"btn",onClick:r,children:"Close"})})]})})})},k=r(1163),O=r(7676),C=function(){return(0,x.jsx)("div",{className:"flex flex-row w-full text-center mt-2",children:(0,x.jsxs)("div",{className:"flex-grow",children:[(0,x.jsx)("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-2 mt-2  m-auto"}),(0,x.jsx)("div",{children:"executing code and generating statistics"}),(0,x.jsx)("div",{children:"tired of waiting? bookmark the page and come back later to view the results"})]})})},S=r(8137),R=r(6339),P=r(6616),A=r(7385),I=r(3597),F=r(7332),Z=function(){var e="https://faster.codes/?runId="+(0,k.useRouter)().query.runId,t="Checkout this comparision on faster.codes";return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"flex flex-col z-50 place-items-center place-content-center rounded",children:[(0,x.jsx)(S.Z,{url:e,className:"my-1",children:(0,x.jsx)(R.Z,{size:48,round:!0})}),(0,x.jsx)(P.Z,{url:e,title:t,className:"my-1",children:(0,x.jsx)(A.Z,{size:48,round:!0})}),(0,x.jsx)(I.Z,{url:e,title:t,className:"my-1",children:(0,x.jsx)(F.Z,{size:48,round:!0})})]})})},E=function(e){var t=e.title,r=e.value,n=e.desc,s=e.unit,a=e.diff,l=0==a.percent?"text-base-content":a.percent<0?"text-success":"text-error",c=a.value>0?"\u2197\ufe0e":"\u2198\ufe0e",i="".concat(c," ").concat(Math.abs(a.value).toFixed(0)," ").concat(s," (").concat(Math.abs(a.percent).toFixed(0),"%)");return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"stat shadow place-items-center place-content-center",children:[(0,x.jsx)("div",{className:"stat-title font-bold text-info opacity-80",children:t}),(0,x.jsxs)("div",{className:"stat-value "+l,children:[null===r||void 0===r?void 0:r.toFixed(0),(0,x.jsx)("span",{className:"text-base",children:s})]}),(0,x.jsx)("div",{className:"stat-desc text-base opacity-80 "+l,children:i}),(0,x.jsx)("div",{className:"stat-desc ",children:n})]})})},_={key:"duration",title:"Execution Time",desc:"Average execution time over 10 runs",unit:"ms"},D={key:"cpu",title:"CPU Time",desc:"Average CPU time over 10 runs",unit:"ms"},M={key:"mem",title:"Memory",desc:"Average memory consumption time over 10 runs",unit:"kb"},z=function(e){var t=e.codes,r=function(e,r){var n=t[e].stats;return n&&n[r]&&n[r].avg},n=function(e,t){var n=r(e,t),s=r((e+1)%2,t);return void 0!=n&&void 0!=s?{percent:100*(n-s)/s,value:n-s}:{percent:0,value:0}};return void 0==t[0].status&&void 0==t[1].status?(0,x.jsx)(C,{}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"flex flex-row w-full mt-4",children:[0,1].map((function(e){var s,a,l,c;return(0,x.jsxs)(x.Fragment,{children:[void 0==(null===(s=t[e])||void 0===s?void 0:s.status)&&(0,x.jsx)("div",{className:"grid-flow-row flex-grow flex-1 border-2 stats shadow-md",children:(0,x.jsx)(C,{})},e),"FAILED"==(null===(a=t[e])||void 0===a?void 0:a.status)&&(0,x.jsx)("div",{className:"grid-flow-row flex-grow flex-1 border-2 stats shadow-md",children:(0,x.jsxs)("div",{className:"stat shadow place-items-center place-content-center self-start",children:[(0,x.jsx)("div",{className:"stat-title font-bold text-info opacity-80",children:"FAILED"}),(0,x.jsxs)("div",{className:"stat-desc whitespace-normal opacity-100 mt-4 text-normal",children:[(0,x.jsx)("p",{className:"text-center",children:"Sorry this run has failed."}),(0,x.jsx)("p",{className:"text-center",children:"At this point, we are unable to provide the exact failure reason (support coming soon)."}),(0,x.jsx)("p",{className:"mt-2",children:"Common causes for this are"}),(0,x.jsxs)("ul",{className:"list-disc",children:[(0,x.jsx)("li",{children:"Compilation failure"}),(0,x.jsx)("li",{children:"Code runs > 4 minutes"}),(0,x.jsx)("li",{children:"Temporary issue with the faster.codes platform"})]})]})]})},e),"SUCCESS"==(null===(l=t[e])||void 0===l?void 0:l.status)&&!t[e].stats&&(0,x.jsx)("div",{children:"STATS NOT AVAILABLE"},e),"SUCCESS"==(null===(c=t[e])||void 0===c?void 0:c.status)&&t[e].stats&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"grid-flow-row flex-grow flex-1 border-2 stats shadow-md",children:[_,D,M].map((function(t){return(0,x.jsx)(E,{title:t.title,value:r(e,t.key),desc:t.desc,unit:t.unit,diff:n(e,t.key)},t.key)}))},e)}),0==e&&(0,x.jsx)("div",{className:"divider divider-vertical text-xl text-primary-focus font-bold mx-6",children:(0,x.jsx)(Z,{})})]})}))})})},L=r(9008);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e){return e.runId?void 0==e.codeRuns[0].status&&void 0==e.codeRuns[1].status?"COMPARING...":"Compare Again":"Compare"}var U=function(){var e,t=d.createRef(),r=(0,k.useRouter)(),s=(0,d.useState)([]),l=s[0],u=s[1],m=(0,d.useState)({codeRuns:[{code:""},{code:""}]}),h=m[0],f=m[1],v=(0,d.useState)(!1),g=v[0],b=v[1],w=null!==(e=r.query)&&void 0!==e&&e.runId?r.query.runId:"dummy";console.log(w);var C=(0,O.ZP)("".concat("wss://api.faster.codes/","/").concat(w)),S=(C.sendMessage,C.lastMessage);C.readyState;(0,d.useEffect)((function(){null===S||S.data.startsWith("<")||(console.log("got new data "+S.data),f(JSON.parse(S.data)))}),[S]);var R=function(e,t){f(T(T({},h),{},{codeRuns:[].concat((0,n.Z)(h.codeRuns.slice(0,e)),[t],(0,n.Z)(h.codeRuns.slice(e+1)))}))},P=function(){var e=(0,a.Z)(c().mark((function e(){var n,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={codeRuns:[{code:h.codeRuns[0].code,lang:h.codeRuns[0].lang},{code:h.codeRuns[1].code,lang:h.codeRuns[1].lang}]},!((s=N(n)).length>0)){e.next=6;break}return u(s),b(!0),e.abrupt("return");case 6:return t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start"}),console.log(n),e.next=10,j(n);case 10:a=e.sent,f(T(T({},h),{},{runId:a})),r.push("/?runId="+a,void 0,{shallow:!0});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(L.default,{children:(0,x.jsx)("title",{children:"{ faster.codes }"})}),(0,x.jsx)(o.Z,{}),(0,x.jsx)(y,{open:g,onClose:function(){return b(!1)},messages:l}),(0,x.jsxs)("div",{className:"container mx-auto h-full",children:[(0,x.jsx)("div",{className:"card text-center",children:(0,x.jsxs)("div",{className:"card-body  p-2",children:[(0,x.jsx)("h1",{className:"card-title text-primary text-3xl",children:"What runs faster?"}),(0,x.jsx)("p",{className:"text-md antialiased text-lg",children:(0,x.jsxs)("ul",{className:"w-full steps",children:[(0,x.jsx)("li",{className:"step step-info",children:"Select Runtime & Write Code (Block A)"}),(0,x.jsx)("li",{className:"step step-info",children:"Select Runtime & Write Code (Block B)"}),(0,x.jsx)("li",{className:"step step-info",children:"Compare"}),(0,x.jsx)("li",{className:"step step-info",children:"View Results"})]})})]})}),(0,x.jsxs)("div",{className:"flex flex-row w-full",children:[(0,x.jsx)("div",{className:"grid flex-grow my-6 bordered border-primary-content  rounded-box place-items-center flex-1 indicator",children:(0,x.jsx)(p,{index:0,codeRunData:h.codeRuns[0],onChange:R})}),(0,x.jsx)("div",{className:"divider divider-vertical text-xl text-primary-focus font-bold",children:"vs"}),(0,x.jsx)("div",{className:"grid flex-grow my-6 bordered border-primary-content rounded-box place-items-center flex-1 indicator",children:(0,x.jsx)(p,{index:1,codeRunData:h.codeRuns[1],onChange:R})})]}),(0,x.jsxs)("div",{className:"flex flex-row w-full mt-3",ref:t,children:[(0,x.jsx)("div",{className:"flex-1 ..."}),(0,x.jsx)("div",{className:"flex-none ...",children:(0,x.jsx)("div",{className:"btn btn-lg btn-primary",onClick:P,children:W(h)})}),(0,x.jsx)("div",{className:"flex-1 ..."})]}),h.runId&&(0,x.jsx)(z,{codes:[h.codeRuns[0],h.codeRuns[1]]})]}),(0,x.jsx)(i.Z,{})]})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7109)}])}},function(e){e.O(0,[774,867,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);